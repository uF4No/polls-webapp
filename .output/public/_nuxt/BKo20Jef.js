import{e as A,h as M,f as N,g as B,i as x,j as E,k as F,l as O,m as j,n as q,r as C,p as $,q as U,s as z,c as v,a,F as P,v as Q,t as g,x as S,y as b,d as V,z as D,o as h}from"./B6x4_DXj.js";import{f as H,u as K,d as R}from"./DmP7V_PI.js";import{g as w,m as L,r as G,C as J,a as W,p as X}from"./DDHX_lXK.js";function I(s){return typeof s=="number"?s:s==="wei"?0:Math.abs(A[s])}async function Y(s,n){const{allowFailure:t=!0,chainId:r,contracts:d,...i}=n,l=s.getClient({chainId:r});return w(l,L,"multicall")({allowFailure:t,contracts:d,...i})}function Z(s,n){const{chainId:t,...r}=n,d=s.getClient({chainId:t});return w(d,G,"readContract")(r)}async function tt(s,n){var u;const{allowFailure:t=!0,blockNumber:r,blockTag:d,...i}=n,l=n.contracts;try{const c={};for(const[o,e]of l.entries()){const y=e.chainId??s.state.chainId;c[y]||(c[y]=[]),(u=c[y])==null||u.push({contract:e,index:o})}const m=()=>Object.entries(c).map(([o,e])=>Y(s,{...i,allowFailure:t,blockNumber:r,blockTag:d,chainId:Number.parseInt(o),contracts:e.map(({contract:y})=>y)})),p=(await Promise.all(m())).flat(),f=Object.values(c).flatMap(o=>o.map(({index:e})=>e));return p.reduce((o,e,y)=>(o&&(o[f[y]]=e),o),[])}catch(c){if(c instanceof J)throw c;const m=()=>l.map(p=>Z(s,{...p,blockNumber:r,blockTag:d}));return t?(await Promise.allSettled(m())).map(p=>p.status==="fulfilled"?{result:p.value,status:"success"}:{error:p.reason,result:void 0,status:"failure"}):await Promise.all(m())}}async function et(s,n){const{address:t,blockNumber:r,blockTag:d,chainId:i,token:l,unit:u="ether"}=n;if(l)try{return await _(s,{balanceAddress:t,chainId:i,symbolType:"string",tokenAddress:l})}catch(o){if(o.name==="ContractFunctionExecutionError"){const e=await _(s,{balanceAddress:t,chainId:i,symbolType:"bytes32",tokenAddress:l}),y=M(N(e.symbol,{dir:"right"}));return{...e,symbol:y}}throw o}const c=s.getClient({chainId:i}),p=await w(c,W,"getBalance")(r?{address:t,blockNumber:r}:{address:t,blockTag:d}),f=s.chains.find(o=>o.id===i)??c.chain;return{decimals:f.nativeCurrency.decimals,formatted:B(p,I(u)),symbol:f.nativeCurrency.symbol,value:p}}async function _(s,n){const{balanceAddress:t,chainId:r,symbolType:d,tokenAddress:i,unit:l}=n,u={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:d}]}],address:i},[c,m,p]=await tt(s,{allowFailure:!1,contracts:[{...u,functionName:"balanceOf",args:[t],chainId:r},{...u,functionName:"decimals",chainId:r},{...u,functionName:"symbol",chainId:r}]}),f=B(c??"0",I(l??m));return{decimals:m,formatted:f,symbol:p,value:c}}function st(s,n={}){let t;try{t=s.getClient(n)}catch{}return t}function at(s,n={}){const t=st(s,n);return t==null?void 0:t.extend(X)}function nt(s,n={}){return{async queryFn({queryKey:t}){const{address:r,scopeKey:d,...i}=t[1];if(!r)throw new Error("address is required");return await et(s,{...i,address:r})??null},queryKey:ot(n)}}function ot(s={}){return["balance",H(s)]}function rt(s={}){const n=x(()=>R(s)),t=E(n),r=F({config:t}),d=x(()=>{const{address:i,chainId:l=r.value,query:u={}}=n.value,c=nt(t,{...n.value,chainId:l}),m=!!(i&&(u.enabled??!0));return{...u,...c,enabled:m}});return K(d)}const ct={class:"max-w-2xl mx-auto px-4 py-8"},it={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-gray-700/50"},lt={class:"space-y-6"},ut={class:"space-y-2"},dt={class:"p-3 bg-gray-900/50 rounded-lg"},mt={key:0,class:"text-gray-400"},pt={class:"flex items-center gap-2"},yt=["href"],ft={class:"text-sm text-gray-400 mt-1"},gt={class:"space-y-2"},bt={class:"flex items-center space-x-2"},vt={class:"flex-1 block p-3 bg-gray-900/50 rounded-lg font-mono text-gray-200"},ht={class:"space-y-2"},xt={class:"p-3 bg-gray-900/50 rounded-lg font-mono text-gray-200"},wt={class:"space-y-2"},kt={class:"p-3 bg-gray-900/50 rounded-lg font-mono text-gray-200"},Ct={class:"mt-8"},Tt=O({__name:"account",setup(s){const n=j(),{address:t,chainId:r,status:d}=q(),{data:i}=rt({address:t}),l=C(!1),u=C(!1),c=async()=>{if(t.value){u.value=!0;try{const e=await at(D).getCode({address:t.value});l.value=e?e.length>2:!1}catch(o){console.error("Error checking contract:",o)}finally{u.value=!1}}},m=x(()=>t.value?l.value?{label:"Smart Contract Account",description:"This is a smart contract account (has code deployed at this address)",class:"text-blue-400"}:{label:"Regular Account",description:"This is a regular account (EOA).",class:"text-green-400"}:""),p=x(()=>t.value?`https://sepolia.explorer.zksync.io/address/${t.value}`:"");$(t,o=>{o?c():l.value=!1}),U(()=>{t.value&&c()}),d.value==="disconnected"&&z("/");const f=async o=>{await navigator.clipboard.writeText(o)};return(o,e)=>{var y,k;return h(),v("div",ct,[a("div",it,[e[9]||(e[9]=a("h2",{class:"text-2xl font-bold text-gray-100 mb-6"},"Account Details",-1)),a("div",lt,[a("div",ut,[e[3]||(e[3]=a("label",{class:"text-sm text-gray-400"},"Account Type",-1)),a("div",dt,[u.value?(h(),v("div",mt," Checking account type... ")):(h(),v(P,{key:1},[a("div",pt,[a("div",{class:Q([m.value.class,"font-medium"])},g(m.value.label),3),l.value?(h(),v("a",{key:0,href:p.value,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-400 hover:text-blue-300 transition-colors"},e[2]||(e[2]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)]),8,yt)):S("",!0)]),a("div",ft,g(m.value.description),1)],64))])]),a("div",gt,[e[5]||(e[5]=a("label",{class:"text-sm text-gray-400"},"Address",-1)),a("div",bt,[a("code",vt,g(b(t)),1),a("button",{onClick:e[0]||(e[0]=T=>f(b(t))),class:"p-2 text-gray-400 hover:text-gray-200 transition-colors",title:"Copy to clipboard"},e[4]||(e[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]))])]),a("div",ht,[e[6]||(e[6]=a("label",{class:"text-sm text-gray-400"},"Network",-1)),a("div",xt," Chain ID: "+g(b(r)),1)]),a("div",wt,[e[7]||(e[7]=a("label",{class:"text-sm text-gray-400"},"Balance",-1)),a("div",kt,g(((y=b(i))==null?void 0:y.formatted)||"0")+" "+g((k=b(i))==null?void 0:k.symbol),1)])]),a("div",Ct,[a("button",{onClick:e[1]||(e[1]=T=>b(n).push("/")),class:"flex items-center text-sm text-gray-400 hover:text-gray-200 transition-colors"},e[8]||(e[8]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),V(" Back to Home ")]))])])])}}});export{Tt as default};
