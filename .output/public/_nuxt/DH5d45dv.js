import A from"./DW787K8r.js";import{_ as B}from"./BGOUBzIe.js";import{u as P}from"./CX6VZ4dE.js";import{l as S,n as D,A as E,r as h,q as M,c as a,a as t,y as l,b as p,w as g,x as v,_ as w,F as T,$,o as r,d as b,t as c,v as _,a0 as j}from"./B6x4_DXj.js";import"./DDHX_lXK.js";const z={class:"space-y-12"},L={class:"text-center"},O={key:0,class:"mt-6"},F={key:0,class:"flex justify-center"},q={key:1,class:"text-center py-12"},H={class:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 max-w-md mx-auto"},I={key:2,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},K={class:"space-y-4"},W={class:"text-xl font-semibold text-gray-100"},Z={class:"flex justify-between text-sm text-gray-400"},G={class:"w-full bg-gray-700 rounded-full h-2.5"},te=S({__name:"index",async setup(J){let i,x;const{address:Q,status:n}=D(),k=([i,x]=E(()=>P()),i=await i,x(),i),d=h([]),m=h(!0),C=s=>new Date(Number(s)*1e3).toLocaleString(),y=s=>Date.now()<Number(s)*1e3,N=async()=>{m.value=!0;try{d.value=await k.getAllPolls(),console.log("polls :>> ",d.value)}catch(s){console.error("Error:",s)}finally{m.value=!1}},V=s=>`/poll/${s}`;return M(()=>{N()}),(s,e)=>{const f=A,u=B;return r(),a("div",z,[t("header",L,[e[1]||(e[1]=t("h2",{class:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"}," Welcome to ZK Polls ",-1)),e[2]||(e[2]=t("p",{class:"mt-4 text-lg text-gray-400"},"Create and participate in decentralized polls",-1)),l(n)==="connected"?(r(),a("div",O,[p(u,{to:"/create",class:"inline-flex items-center gap-2 px-6 py-3 font-medium bg-primary-500 text-white rounded-lg shadow-lg shadow-primary-500/20 hover:bg-primary-600 hover:shadow-primary-600/20 transition-all active:transform active:scale-95"},{default:g(()=>[p(f,{name:"heroicons:plus-circle",class:"w-5 h-5"}),e[0]||(e[0]=b(" Create new Poll "))]),_:1})])):v("",!0)]),m.value?(r(),a("div",F,e[3]||(e[3]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"},null,-1)]))):d.value.length?(r(),a("div",I,[(r(!0),a(T,null,$(d.value,o=>(r(),w(u,{key:String(o.id),to:l(n)==="connected"?V(o.id):"#",class:_(["block bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 transition-all",l(n)==="connected"?"hover:border-primary-500/50 hover:shadow-lg hover:shadow-primary-500/5":"cursor-not-allowed opacity-80"]),"aria-disabled":l(n)!=="connected"},{default:g(()=>[t("div",K,[t("h3",W,c(o.title),1),t("div",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",y(o.deadline)?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"])},c(y(o.deadline)?"Active":"Ended"),3),t("div",Z,[t("span",null,"Total Votes: "+c((o.optionOneVotes+o.optionTwoVotes).toString()),1),t("span",null,"Ends: "+c(C(o.deadline)),1)]),t("div",G,[t("div",{class:"bg-primary-500 h-2.5 rounded-full",style:j({width:`${Number(o.optionOneVotes)/(Number(o.optionOneVotes)+Number(o.optionTwoVotes))*100||0}%`})},null,4)])])]),_:2},1032,["to","class","aria-disabled"]))),128))])):(r(),a("div",q,[t("div",H,[e[5]||(e[5]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e[6]||(e[6]=t("h3",{class:"mt-4 text-xl font-medium text-gray-300"},"No open polls yet",-1)),e[7]||(e[7]=t("p",{class:"mt-2 text-gray-400"},"Be the first one to create a poll!",-1)),l(n)==="connected"?(r(),w(u,{key:0,to:"/create",class:"inline-flex items-center gap-2 px-6 py-3 font-medium bg-primary-500 text-white rounded-lg shadow-lg shadow-primary-500/20 hover:bg-primary-600 hover:shadow-primary-600/20 transition-all active:transform active:scale-95"},{default:g(()=>[p(f,{name:"heroicons:plus-circle",class:"w-5 h-5"}),e[4]||(e[4]=b(" Create new Poll "))]),_:1})):v("",!0)])]))])}}});export{te as default};
